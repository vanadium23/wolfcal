# fn-11-01z.3 Add tests for new format and backward compatibility

## Description
Add comprehensive tests for the new binary format and backward compatibility.

**Size:** S
**Files:** `src/test/config/transferCrypto.test.ts`

### Approach

Follow existing test patterns at `transferCrypto.test.ts`. Add test cases:

1. **New format round-trip:** encrypt with new format → decrypt → verify
2. **Old format compatibility:** decrypt known old-format string → verify
3. **Size reduction:** encrypt sample config → assert size < threshold
4. **Edge cases:**
   - Empty string
   - Unicode content (emoji, CJK)
   - Large payload (stress test)
5. **Error handling:** corrupted data, wrong passphrase

### Key context

- Use vitest framework (already in project)
- Can generate old-format test data by temporarily using old encrypt logic
- Test both compression path and fallback if applicable
## Acceptance
- [ ] Round-trip test passes for new format
- [ ] Old format decryption test passes with known test vector
- [ ] Size reduction test verifies < 50% of original double-base64 size
- [ ] Edge case tests cover empty, unicode, and large inputs
- [ ] Error handling tests verify descriptive errors
## Done summary
TBD

## Evidence
- Commits:
- Tests:
- PRs:
